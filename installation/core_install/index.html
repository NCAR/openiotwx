
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../print/">
      
      
        <link rel="next" href="../code/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>Flash - openIoTwx</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flashing-microcontrollers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="openIoTwx" class="md-header__button md-logo" aria-label="openIoTwx" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            openIoTwx
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flash
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="openIoTwx" class="md-nav__button md-logo" aria-label="openIoTwx" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    openIoTwx
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
      
      
      
        <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../guide/" class="md-nav__link">
        Guide Usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          openIoTwx Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          openIoTwx Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/platform/" class="md-nav__link">
        Platform
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/community/" class="md-nav__link">
        Community
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/ideals/" class="md-nav__link">
        Ideals
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/materials/" class="md-nav__link">
        Materials list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/computing/" class="md-nav__link">
        Computing needs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/software/" class="md-nav__link">
        Software tools
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../print/" class="md-nav__link">
        Print
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Install
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Install
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Flash
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Flash
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iotwx-library-installation" class="md-nav__link">
    IoTwx library installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-your-system" class="md-nav__link">
    Preparing Your System
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloning-the-file-structure" class="md-nav__link">
    Cloning the file structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#editing-configuration-files" class="md-nav__link">
    Editing Configuration Files
  </a>
  
    <nav class="md-nav" aria-label="Editing Configuration Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-configjson-file" class="md-nav__link">
    Understanding the config.json file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-onto-the-microcontroller" class="md-nav__link">
    Flashing onto the microcontroller
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../code/" class="md-nav__link">
        Arduino Code
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Assemble
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Assemble
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../assemble/connection/" class="md-nav__link">
        Power and Internet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../assemble/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../assemble/core/" class="md-nav__link">
        Core Unit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../assemble/accessory_assemble/" class="md-nav__link">
        Accessory Node Addition
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Deploy
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Deploy
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deploying/core_deploy/" class="md-nav__link">
        Core Unit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deploying/accessory_deploy/" class="md-nav__link">
        Accessory Nodes
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../data_management/" class="md-nav__link">
        Data Management
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../contribution/" class="md-nav__link">
        Contribution
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#iotwx-library-installation" class="md-nav__link">
    IoTwx library installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#preparing-your-system" class="md-nav__link">
    Preparing Your System
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloning-the-file-structure" class="md-nav__link">
    Cloning the file structure
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#editing-configuration-files" class="md-nav__link">
    Editing Configuration Files
  </a>
  
    <nav class="md-nav" aria-label="Editing Configuration Files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-configjson-file" class="md-nav__link">
    Understanding the config.json file
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flashing-onto-the-microcontroller" class="md-nav__link">
    Flashing onto the microcontroller
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="flashing-microcontrollers">Flashing Microcontrollers</h1>
<p>Each station node is build with a microcontroller as its brain. Each
microcontroller is connected to one or more sensors either directly or
by hubs -- <a href="https://www.seeedstudio.com/Grove-I2C-Hub.html">Grove hubs</a> or <a href="https://www.seeedstudio.com/Grove-Qwiic-Hub-p-4531.html">Qwiic hubs</a>. </p>
<p>IotWx is designed to be used with the <a href="https://m5stack.com/collections/m5-core/products/atom-lite-esp32-development-kit">m5Stack Atom Lite</a>
ESP32-Pico based microcontroller, but it is possible to connect other microcontroller devices with a few modifications to the code. Technically <em>any</em> ESP32 chip with enough memory would work.
That being said, the M5 atom lite is quite cheap and easy to purchase, and we thus suggest that one.</p>
<h2 id="iotwx-library-installation">IoTwx library installation</h2>
<p>Before compiling the microcode onto the Arduino, you will also need to
install the IoTwx library which controls the
communications and initialization functions of the station.</p>
<div class="admonition info">
<p class="admonition-title">IoTwx Library</p>
<p>The library can found at the following repository. It should be
installed in your <code>Arduino/libraries</code> directory and once installed, you
may use it by the <code>#include "IoTwx.h"</code> directive.</p>
<ul>
<li><a href="https://github.com/NCAR/esp32-atomlite-arduino-iotwx">https://github.com/NCAR/esp32-atomlite-arduino-iotwx</a></li>
</ul>
</div>
<h2 id="preparing-your-system">Preparing Your System</h2>
<p>First, download Arduino 1.8 - this is an old release but in order to use the correct data format, SPIFFS, you must use Arduino 1.8. Download Arduino 1.8.19 following this <a href="https://www.arduino.cc/en/Main/Software">link</a>. If this is changed in Arduino IDE, IoTWX will adapt accordingly. </p>
<p>There are a few other steps you will need to complete:</p>
<p>Next, download the following packages. The easiest way to do this is to follow the github links and click download as zip. 
From there, in the ‘manage libraries’ functionality of Arduino, you can add a library from a .ZIP. Do this with all packages that aren't native in the Arduino IDE library set.</p>
<ul>
<li>install the required ESP32 Pico / M5 Stack Atom lite boards; a comprehensive instruction set is <a href="https://docs.m5stack.com/#/en/arduino/arduino_development">here</a></li>
<li>install the <a href="https://github.com/me-no-dev/arduino-esp32fs-plugin">arduino-esp32fs-plugin</a> that will allow SPIFFS file uploads to ESP32 boards</li>
<li>install the following libraries through the Arduino IDE or through the zip link:<ul>
<li>MQTT library from 256dpi <a href="https://github.com/256dpi/arduino-mqtt">https://github.com/256dpi/arduino-mqtt</a></li>
<li>ArduinoJson library <a href="https://github.com/bblanchon/ArduinoJson">https://github.com/bblanchon/ArduinoJson</a></li>
<li>FastLED library <a href="https://github.com/FastLED/FastLED">https://github.com/FastLED/FastLED</a></li>
<li>NTPClient library <a href="https://github.com/arduino-libraries/NTPClient">https://github.com/arduino-libraries/NTPClient</a></li>
<li>Adafruit BME680 <a href="https://github.com/adafruit/Adafruit_BME680">https://github.com/adafruit/Adafruit_BME680</a></li>
<li>Adafruit LTR390 <a href="https://github.com/adafruit/Adafruit_LTR390">https://github.com/adafruit/Adafruit_LTR390</a></li>
<li>RG-15 Rain Gauge <a href="https://rainsensors.com/docs/rg-guides/rg-arduino/hydreon-arduino-library/">https://rainsensors.com/docs/rg-guides/rg-arduino/hydreon-arduino-library/</a></li>
</ul>
</li>
</ul>
<p>If ESP32 isn't downloaded underneath the board manager, download it. 
Once ESP32 is downloaded, select it within board manager and use version WHAT VERSION
When selecting what board to use, under ESP32 Arduino choose ESP32 Dev Module</p>
<p>This will add a number of options underneath your tools section.
Select:
    * Upload speed 115200
    * CPU Frequency: 240
    * Flash Frequency:80
    * Flash mode: QIO
    * Flash size: 4 MB
    * Partition scheme: Huge APP
    * PSram: disabled
    * Leave the rest as default if that setting was not already the default mode</p>
<h2 id="cloning-the-file-structure">Cloning the file structure</h2>
<p>Next, clone the github REPO (LINK,LINK,LINK) into Arduino. 
Alternatively, click this link and download the zip of the file structure. 
There should be code, a data directory, and within the data directory, a config.json</p>
<h2 id="editing-configuration-files">Editing Configuration Files</h2>
<p>Your microcontroller must contain a configuration file to operate.  The file contains information about WiFi connections, MQTT (the way your station will send data) connections and some other relevant information.</p>
<p>The microntroller uses an <a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/storage/spiffs.html">ESP32 SPIFFS filesystem</a> to store the configuration. 
In the folder that you will flash onto your mictrocontroller, you will find a <code>/data</code> folder which contains a <code>config.json</code> file.</p>
<h3 id="understanding-the-configjson-file">Understanding the <code>config.json</code> file</h3>
<p>The typical config file  looks like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w">    </span>
<span class="w">    </span><span class="nt">&quot;iotwx_local_config&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_id&quot;</span><span class="p">:</span><span class="s2">&quot;m5atom/esp32/aaffbbcc&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_mq_ip&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_mq_port&quot;</span><span class="p">:</span><span class="s2">&quot;1883&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_publish_interval&quot;</span><span class="p">:</span><span class="s2">&quot;1&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_reset_interval&quot;</span><span class="p">:</span><span class="s2">&quot;360&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_sensor&quot;</span><span class="p">:</span><span class="s2">&quot;grove/i2c&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_timezone&quot;</span><span class="p">:</span><span class="s2">&quot;21600&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_wifi_pwd&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_wifi_ssid&quot;</span><span class="p">:</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_topic&quot;</span><span class="p">:</span><span class="s2">&quot;measurements/iotwx&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;iotwx_max_frequency&quot;</span><span class="p">:</span><span class="s2">&quot;240&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>The details of each key are described below.</p>
<table>
<thead>
<tr>
<th align="center">key</th>
<th align="left">value / description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><code>iotwx_local_config</code></td>
<td align="left">always set to "1"</td>
</tr>
<tr>
<td align="center"><code>iotwx_id</code></td>
<td align="left">contains a <em>unique</em> identifier for you station as a whole -- that is to say, if you have multiple nodes on the same <em>physical station</em>, they would share the same <code>iotwx_id</code>.  This identifier is also used in the data portal. (e.g. <code>"iotwx-co-bb83"</code>)</td>
</tr>
<tr>
<td align="center"><code>iotwx_mq_ip</code></td>
<td align="left">the ip address (e.g. <code>"172.88.0.13"</code>) of the MQTT broker you will be using.  At the moment only one such broker is allowed. You may use the FQDN (<code>"mymqttsite.wx"</code>) but the IP address uses less power by reducing the time WiFi is on to do DNS lookups.</td>
</tr>
<tr>
<td align="center"><code>iotwx_mq_port</code></td>
<td align="left">the port number of the broker, which is typically <code>"1883"</code> for non-SSL and <code>"8883"</code> for SSL.</td>
</tr>
<tr>
<td align="center"><code>iotwx_publish_interval</code></td>
<td align="left">the interval you wish your station to transmit in <em>minutes</em>.  Note this is relevant primarily for the Atmos node which continuously transmits at the specified interval. Hydro and Aero nodes only transmit when there is data to transmit.</td>
</tr>
<tr>
<td align="center"><code>iotwx_reset_interval</code></td>
<td align="left">the number of minutes between system resets.  The nodes are designed to reset every 6 hours or twice daily.  Reset is instantaneous and the system is restored to full functionality in 90 seconds after the Bluetooth acquisition phase. (e.g. <code>"1"</code> for 1 minute)</td>
</tr>
<tr>
<td align="center"><code>iotwx_sensor</code></td>
<td align="left">the sensor string for the node and may vary based on the node.  Typically do not change this value from what is contained in the default for your node.</td>
</tr>
<tr>
<td align="center"><code>iotwx_timezone</code></td>
<td align="left">the GMT offset in seconds of the station timezone. (e.g. <code>"21600"</code>)</td>
</tr>
<tr>
<td align="center"><code>iotwx_wifi_pwd</code> and <code>iotwx_wifi_ssid</code></td>
<td align="left">are the corresponding wifi password and ssid of the network your node will connect to.  Note, it is not necessary (but would be unusual) for all nodes to connect to the same WiFi network. (e.g. <code>"your_wifi"</code> and <code>"your_password"</code>)</td>
</tr>
<tr>
<td align="center"><code>iotwx_topic</code></td>
<td align="left">the MQTT topic your node will publish to.  It is not necessary for all nodes to publish to the same topic, but if you are using the CHORDS MQTT Orchestrator (<a href="https://github.com/NCAR/chords-mqtt-orchestrator">GitHub - NCAR/chords-mqtt-orchestrator</a>), then you will need to adjust it accordingly to route your messages where they belong.  The current default is <code>"iotwx/net"</code>.</td>
</tr>
<tr>
<td align="center"><code>iotwx_max_frequency</code></td>
<td align="left">is the CPU frequency (in Mhz) you wish your node to run  on.  The m5Stack Atom Lite can be run at frequencies up to 240, but has only been tested down 40 Mhz. Varying the value has power-saving benefits, where we have seen 20-50% reduction in power consumption of a node.</td>
</tr>
</tbody>
</table>
<h2 id="flashing-onto-the-microcontroller">Flashing onto the microcontroller</h2>
<p>Once you have everything set up within Arduino IDE, compile everything you just did. If that works with no errors, plug the microcontroller into your computer, and flash onto it. (ADD MORE DETAILS HERE)</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>